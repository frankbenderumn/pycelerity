CREATE TABLE IF NOT EXISTS "user" (
	id SERIAL PRIMARY KEY,
	fname VARCHAR(32) NOT NULL,
	lname VARCHAR(32) NOT NULL,
	email VARCHAR(100) NOT NULL CHECK (email ~* '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'),
	gender BOOLEAN NOT NULL,
	bio VARCHAR(300) NOT NULL
);
CREATE TABLE IF NOT EXISTS "portfolio" (
	id SERIAL PRIMARY KEY,
	name VARCHAR(50) NOT NULL,
	prio INTEGER NOT NULL,
	completed BOOLEAN NOT NULL
);
CREATE TABLE IF NOT EXISTS "follower" (
	id SERIAL PRIMARY KEY,
	follower_id INTEGER NOT NULL,
	followee_id INTEGER NOT NULL,
	FOREIGN KEY (follower_id) REFERENCES "user"(id) ON DELETE CASCADE,
	FOREIGN KEY (followee_id) REFERENCES "user"(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "post" (
	id SERIAL PRIMARY KEY,
	content VARCHAR(300) NOT NULL,
	user_id INTEGER NOT NULL,
	FOREIGN KEY (user_id) REFERENCES "user"(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "comment" (
	id SERIAL PRIMARY KEY,
	content VARCHAR(300) NOT NULL,
	user_id INTEGER NOT NULL,
	post_id INTEGER NOT NULL,
	FOREIGN KEY (user_id) REFERENCES "user"(id) ON DELETE CASCADE,
	FOREIGN KEY (post_id) REFERENCES "post"(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "like" (
	id SERIAL PRIMARY KEY,
	user_id INTEGER NOT NULL,
	money VARCHAR(500) NOT NULL,
	likeable_type VARCHAR(50) NOT NULL,
	likeable_id INTEGER NOT NULL,
	UNIQUE (likeable_id, likeable_type),
	FOREIGN KEY (user_id) REFERENCES "user"(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "arson" (
	id SERIAL PRIMARY KEY,
	portfolio_id INTEGER NOT NULL,
	text VARCHAR(50) NOT NULL,
	follower_id INTEGER NOT NULL,
	FOREIGN KEY (portfolio_id) REFERENCES "portfolio"(id) ON DELETE CASCADE,
	FOREIGN KEY (follower_id) REFERENCES "follower"(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "todo" (
	id SERIAL PRIMARY KEY,
	name VARCHAR(50) NOT NULL,
	prio INTEGER NOT NULL,
	completed BOOLEAN NOT NULL,
	arson_id INTEGER NOT NULL,
	FOREIGN KEY (arson_id) REFERENCES "arson"(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "okay" (
	id SERIAL PRIMARY KEY,
	delta VARCHAR(100) NOT NULL,
	delta2 VARCHAR(100) NOT NULL
);
CREATE TABLE IF NOT EXISTS "wtf" (
	ow SERIAL PRIMARY KEY,
	my INTEGER NOT NULL
);